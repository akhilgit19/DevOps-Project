Build and Deploy Series | How to Deploy React Application in Docker
======================================================================

AWS EC2

        Docker Containers

                            React-docker images
                             80 / container port



80- nodeport/hostport






1.cat /etc/os-release
2.for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt-get remove $pkg; done
3.# Add Docker's official GPG key:
sudo apt-get update
sudo apt-get install ca-certificates curl
sudo install -m 0755 -d /etc/apt/keyrings
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc

# Add the repository to Apt sources:
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
sudo apt-get update
4.sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
5.docker --version
6.git clone https://github.com/akhilgit19/Gold_Site_Ecommerce-1.git
7.cd Gold_Site_Ecommerce-1
8. cat golddockerfile
FROM node:18 as build
# Set the working directory in the container
WORKDIR /app
# Copy package.json and package-lock.json from GitHub repository
COPY package*.json ./
# Install dependencies
RUN npm install
#Copy git code to /app directory
COPY . .
# Build the React app
RUN npm run build
#Use Nginx as the Application server

FROM nginx:alpine
# Copy the built React app to Nginx's web server directory
COPY --from=build /app/build /usr/share/nginx/html
# Expose port 80 for the Nginx server
EXPOSE 80
#Start Nginx when the container runs
CMD ["nginx", "-g", "daemon off;"]

9.  sudo docker build -t react-docker -f golddockerfile .
10. sudo docker images
11  sudo docker run --name react-docker-container -p 80:80 -d react-docker
12  sudo docker ps
13  sudo docker stop 3d6
14  sudo docker start 3d6
15  sudo docker images && sudo systemctl enable docker
16  sudo docker login
17  sudo docker tag react-docker:latest akhilpagadapoola/react-nginx:latest
18  sudo docker push akhilpagadapoola/react-nginx:latest

