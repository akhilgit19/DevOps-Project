
=================================================
ubuntu@ip-172-31-36-29:~$ curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
chmod 700 get_helm.sh
./get_helm.sh
Helm v3.15.4 is already latest
ubuntu@ip-172-31-36-29:~$ helm version
version.BuildInfo{Version:"v3.15.4", GitCommit:"fa9efb07d9d8debbb4306d72af76a383895aa8c4", GitTreeState:"clean", GoVersion:"go1.22.6"}
ubuntu@ip-172-31-36-29:~$ helm create react-chart
Creating react-chart
WARNING: File "/home/ubuntu/react-chart/Chart.yaml" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/values.yaml" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/.helmignore" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/ingress.yaml" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/deployment.yaml" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/service.yaml" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/serviceaccount.yaml" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/hpa.yaml" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/NOTES.txt" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/_helpers.tpl" already exists. Overwriting.
WARNING: File "/home/ubuntu/react-chart/templates/tests/test-connection.yaml" already exists. Overwriting.
ubuntu@ip-172-31-36-29:~$ ls
bashscripts  deployment.yaml  react-chart         react-service.yaml
deploy.sh    get_helm.sh      react-ingress.yaml  snap
ubuntu@ip-172-31-36-29:~$ cd react-chart
ubuntu@ip-172-31-36-29:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$  cd templates
ubuntu@ip-172-31-36-29:~/react-chart/templates$ ls
NOTES.txt     deployment.yaml  ingress.yaml  serviceaccount.yaml
_helpers.tpl  hpa.yaml         service.yaml  tests
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cat service.yaml
apiVersion: v1
kind: Service
metadata:
  name: {{ include "react-chart.fullname" . }}
  labels:
    {{- include "react-chart.labels" . | nindent 4 }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: http
      protocol: TCP
      name: http
  selector:
    {{- include "react-chart.selectorLabels" . | nindent 4 }}
ubuntu@ip-172-31-36-29:~/react-chart/templates$ sudo vi service.yaml
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cat service.yaml
apiVersion: v1
kind: Service
metadata:
  name: {{ include "react-chart.fullname" . }}
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "react-chart.labels" . | nindent 4 }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: http
      protocol: TCP
      name: http
  selector:
    {{- include "react-chart.selectorLabels" . | nindent 4 }}
ubuntu@ip-172-31-36-29:~/react-chart/templates$ ls
NOTES.txt     deployment.yaml  ingress.yaml  serviceaccount.yaml
_helpers.tpl  hpa.yaml         service.yaml  tests
ubuntu@ip-172-31-36-29:~/react-chart/templates$ ls - la
ls: cannot access '-': No such file or directory
ls: cannot access 'la': No such file or directory
ubuntu@ip-172-31-36-29:~/react-chart/templates$ ls -la
total 40
drwxr-xr-x 3 ubuntu ubuntu 4096 Sep  6 17:31 .
drwxr-xr-x 5 ubuntu ubuntu 4096 Sep  6 09:17 ..
-rw-r--r-- 1 ubuntu ubuntu 1760 Sep  6 17:18 NOTES.txt
-rw-r--r-- 1 ubuntu ubuntu 1822 Sep  6 17:18 _helpers.tpl
-rw-rw-r-- 1 ubuntu ubuntu 2183 Sep  6 17:18 deployment.yaml
-rw-r--r-- 1 ubuntu ubuntu 1003 Sep  6 17:18 hpa.yaml
-rw-rw-r-- 1 ubuntu ubuntu 2087 Sep  6 17:18 ingress.yaml
-rw-rw-r-- 1 ubuntu ubuntu  410 Sep  6 17:31 service.yaml
-rw-r--r-- 1 ubuntu ubuntu  397 Sep  6 17:18 serviceaccount.yaml
drwxr-xr-x 2 ubuntu ubuntu 4096 Sep  6 09:12 tests
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cd tests
ubuntu@ip-172-31-36-29:~/react-chart/templates/tests$ ls
test-connection.yaml
ubuntu@ip-172-31-36-29:~/react-chart/templates/tests$ cd ..
ubuntu@ip-172-31-36-29:~/react-chart/templates$ ls
NOTES.txt     deployment.yaml  ingress.yaml  serviceaccount.yaml
_helpers.tpl  hpa.yaml         service.yaml  tests
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cd ..
ubuntu@ip-172-31-36-29:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ cat values.yaml
# Default values for react-chart.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 2
namespace: react-nginx-namespace

image:
  repository: akhilpagadapoola/react-nginx
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: false
  # Automatically mount a ServiceAccount's API credentials?
  automount: false
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: true
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: hkhnet.xyz
      paths:
        - path: /
          pathType: Prefix
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #   cpu: 100m
  #   memory: 128Mi
  # requests:
  #   cpu: 100m
  #   memory: 128Mi

livenessProbe:
  httpGet:
    path: /
    port: http
readinessProbe:
  httpGet:
    path: /
    port: http

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

# Additional volumes on the output Deployment definition.
volumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false

# Additional volumeMounts on the output Deployment definition.
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

nodeSelector: {}

tolerations: []

affinity: {}
ubuntu@ip-172-31-36-29:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ cd templates
ubuntu@ip-172-31-36-29:~/react-chart/templates$ ls
NOTES.txt     deployment.yaml  ingress.yaml  serviceaccount.yaml
_helpers.tpl  hpa.yaml         service.yaml  tests
ubuntu@ip-172-31-36-29:~/react-chart/templates$ sudo vi deployment.yaml
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cat deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: {{ include "react-chart.fullname" . }}
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "react-chart.labels" . | nindent 4 }}
spec:
  {{- if not .Values.autoscaling.enabled }}
  replicas: {{ .Values.replicaCount }}
  {{- end }}
  selector:
    matchLabels:
      {{- include "react-chart.selectorLabels" . | nindent 6 }}
  template:
    metadata:
      {{- with .Values.podAnnotations }}
      annotations:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      labels:
        {{- include "react-chart.labels" . | nindent 8 }}
        {{- with .Values.podLabels }}
        {{- toYaml . | nindent 8 }}
        {{- end }}
    spec:
      {{- with .Values.imagePullSecrets }}
      imagePullSecrets:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      serviceAccountName: {{ include "react-chart.serviceAccountName" . }}
      securityContext:
        {{- toYaml .Values.podSecurityContext | nindent 8 }}
      containers:
        - name: {{ .Chart.Name }}
          securityContext:
            {{- toYaml .Values.securityContext | nindent 12 }}
          image: "{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}"
          imagePullPolicy: {{ .Values.image.pullPolicy }}
          ports:
            - name: http
              containerPort: {{ .Values.service.port }}
              protocol: TCP
          livenessProbe:
            {{- toYaml .Values.livenessProbe | nindent 12 }}
          readinessProbe:
            {{- toYaml .Values.readinessProbe | nindent 12 }}
          resources:
            {{- toYaml .Values.resources | nindent 12 }}
          {{- with .Values.volumeMounts }}
          volumeMounts:
            {{- toYaml . | nindent 12 }}
          {{- end }}
      {{- with .Values.volumes }}
      volumes:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      {{- with .Values.nodeSelector }}
      nodeSelector:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      {{- with .Values.affinity }}
      affinity:
        {{- toYaml . | nindent 8 }}
      {{- end }}
      {{- with .Values.tolerations }}
      tolerations:
        {{- toYaml . | nindent 8 }}
      {{- end }}
ubuntu@ip-172-31-36-29:~/react-chart/templates$ sudo vi service.yaml
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cat service.yaml
apiVersion: v1
kind: Service
metadata:
  name: {{ include "react-chart.fullname" . }}
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "react-chart.labels" . | nindent 4 }}
spec:
  type: {{ .Values.service.type }}
  ports:
    - port: {{ .Values.service.port }}
      targetPort: http
      protocol: TCP
      name: http
  selector:
    {{- include "react-chart.selectorLabels" . | nindent 4 }}
ubuntu@ip-172-31-36-29:~/react-chart/templates$ sudo vi ingress.yaml
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cat ingress.yaml
{{- if .Values.ingress.enabled -}}
{{- $fullName := include "react-chart.fullname" . -}}
{{- $svcPort := .Values.service.port -}}
{{- if and .Values.ingress.className (not (semverCompare ">=1.18-0" .Capabilities.KubeVersion.GitVersion)) }}
  {{- if not (hasKey .Values.ingress.annotations "kubernetes.io/ingress.class") }}
  {{- $_ := set .Values.ingress.annotations "kubernetes.io/ingress.class" .Values.ingress.className}}
  {{- end }}
{{- end }}
{{- if semverCompare ">=1.19-0" .Capabilities.KubeVersion.GitVersion -}}
apiVersion: networking.k8s.io/v1
{{- else if semverCompare ">=1.14-0" .Capabilities.KubeVersion.GitVersion -}}
apiVersion: networking.k8s.io/v1beta1
{{- else -}}
apiVersion: extensions/v1beta1
{{- end }}
kind: Ingress
metadata:
  name: {{ $fullName }}
  namespace: {{ .Values.namespace }}
  labels:
    {{- include "react-chart.labels" . | nindent 4 }}
  {{- with .Values.ingress.annotations }}
  annotations:
    {{- toYaml . | nindent 4 }}
  {{- end }}
spec:
  {{- if and .Values.ingress.className (semverCompare ">=1.18-0" .Capabilities.KubeVersion.GitVersion) }}
  ingressClassName: {{ .Values.ingress.className }}
  {{- end }}
  {{- if .Values.ingress.tls }}
  tls:
    {{- range .Values.ingress.tls }}
    - hosts:
        {{- range .hosts }}
        - {{ . | quote }}
        {{- end }}
      secretName: {{ .secretName }}
    {{- end }}
  {{- end }}
  rules:
    {{- range .Values.ingress.hosts }}
    - host: {{ .host | quote }}
      http:
        paths:
          {{- range .paths }}
          - path: {{ .path }}
            {{- if and .pathType (semverCompare ">=1.18-0" $.Capabilities.KubeVersion.GitVersion) }}
            pathType: {{ .pathType }}
            {{- end }}
            backend:
              {{- if semverCompare ">=1.19-0" $.Capabilities.KubeVersion.GitVersion }}
              service:
                name: {{ $fullName }}
                port:
                  number: {{ $svcPort }}
              {{- else }}
              serviceName: {{ $fullName }}
              servicePort: {{ $svcPort }}
              {{- end }}
          {{- end }}
    {{- end }}
{{- end }}
ubuntu@ip-172-31-36-29:~/react-chart/templates$ kubectl config view
Command 'kubectl' not found, but can be installed with:
sudo snap install kubectl
ubuntu@ip-172-31-36-29:~/react-chart/templates$ microk8s kubectl config view
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: DATA+OMITTED
    server: https://127.0.0.1:16443
  name: microk8s-cluster
contexts:
- context:
    cluster: microk8s-cluster
    user: admin
  name: microk8s
current-context: microk8s
kind: Config
preferences: {}
users:
- name: admin
  user:
    client-certificate-data: DATA+OMITTED
    client-key-data: DATA+OMITTED
ubuntu@ip-172-31-36-29:~/react-chart/templates$ microk8s kubectl config view --raw > ~/.kube/config
ubuntu@ip-172-31-36-29:~/react-chart/templates$ chmod 600 ~/.kube/config
ubuntu@ip-172-31-36-29:~/react-chart/templates$ helm install react-chart .
Error: INSTALLATION FAILED: Chart.yaml file is missing
ubuntu@ip-172-31-36-29:~/react-chart/templates$ cd ..
ubuntu@ip-172-31-36-29:~/react-chart$ helm install react-chart .
NAME: react-chart
LAST DEPLOYED: Fri Sep  6 17:47:10 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  http://hkhnet.xyz/
ubuntu@ip-172-31-36-29:~/react-chart$ kubectl get pods -n react-nginx-namespace
Command 'kubectl' not found, but can be installed with:
sudo snap install kubectl
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl get pods -n react-nginx-namespace
NAME                               READY   STATUS    RESTARTS   AGE
react-chart-64c79b4d84-84kr6       1/1     Running   0          62s
react-chart-64c79b4d84-msxl2       1/1     Running   0          62s
react-deployment-959dfb7cb-nlgmx   1/1     Running   0          41m
react-deployment-959dfb7cb-tzc4w   1/1     Running   0          41m
ubuntu@ip-172-31-36-29:~/react-chart$ helm list
NAME       	NAMESPACE	REVISION	UPDATED                                	STATUS  	CHART            	APP VERSION
react-chart	default  	1       	2024-09-06 17:47:10.405352842 +0000 UTC	deployed	react-chart-0.1.0	1.16.0     
ubuntu@ip-172-31-36-29:~/react-chart$ helm upgrade react-chart .
Release "react-chart" has been upgraded. Happy Helming!
NAME: react-chart
LAST DEPLOYED: Fri Sep  6 17:48:50 2024
NAMESPACE: default
STATUS: deployed
REVISION: 2
NOTES:
1. Get the application URL by running these commands:
  http://hkhnet.xyz/
ubuntu@ip-172-31-36-29:~/react-chart$ helm list
NAME       	NAMESPACE	REVISION	UPDATED                                	STATUS  	CHART            	APP VERSION
react-chart	default  	2       	2024-09-06 17:48:50.629659832 +0000 UTC	deployed	react-chart-0.1.0	1.16.0     
ubuntu@ip-172-31-36-29:~/react-chart$ helm history react-chart
REVISION	UPDATED                 	STATUS    	CHART            	APP VERSION	DESCRIPTION     
1       	Fri Sep  6 17:47:10 2024	superseded	react-chart-0.1.0	1.16.0     	Install complete
2       	Fri Sep  6 17:48:50 2024	deployed  	react-chart-0.1.0	1.16.0     	Upgrade complete
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl get pods -n react-nginx-namespace
NAME                               READY   STATUS    RESTARTS   AGE
react-chart-64c79b4d84-84kr6       1/1     Running   0          4m7s
react-chart-64c79b4d84-msxl2       1/1     Running   0          4m7s
react-deployment-959dfb7cb-nlgmx   1/1     Running   0          44m
react-deployment-959dfb7cb-tzc4w   1/1     Running   0          44m
ubuntu@ip-172-31-36-29:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ helm upgrade react-chart .
Release "react-chart" has been upgraded. Happy Helming!
NAME: react-chart
LAST DEPLOYED: Fri Sep  6 17:55:39 2024
NAMESPACE: default
STATUS: deployed
REVISION: 3
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=react-chart,app.kubernetes.io/instance=react-chart" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl get pods -n react-nginx-namespace
NAME                               READY   STATUS             RESTARTS   AGE
react-chart-64c79b4d84-j26ks       1/1     Running            0          116s
react-chart-64c79b4d84-l2xs7       1/1     Running            0          116s
react-chart-7c5f97fc98-4vw5x       0/1     ImagePullBackOff   0          5s
react-deployment-959dfb7cb-2h2km   1/1     Running            0          116s
react-deployment-959dfb7cb-4jjbp   1/1     Running            0          116s
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl delete pod react-chart-64c79b4d84-j26ks react-chart-64c79b4d84-l2xs7  react-deployment-959dfb7cb-2h2km react-deployment-959dfb7cb-4jjbp
Error from server (NotFound): pods "react-chart-64c79b4d84-j26ks" not found
Error from server (NotFound): pods "react-chart-64c79b4d84-l2xs7" not found
Error from server (NotFound): pods "react-deployment-959dfb7cb-2h2km" not found
Error from server (NotFound): pods "react-deployment-959dfb7cb-4jjbp" not found
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl delete pod react-chart-64c79b4d84-j26ks react-chart-64c79b4d84-l2xs7  react-deployment-959dfb7cb-2h2km react-deployment-959dfb7cb-4jjbp -n react-nginx-namespace
pod "react-chart-64c79b4d84-j26ks" deleted
pod "react-chart-64c79b4d84-l2xs7" deleted
pod "react-deployment-959dfb7cb-2h2km" deleted
pod "react-deployment-959dfb7cb-4jjbp" deleted
ubuntu@ip-172-31-36-29:~/react-chart$ cd ..
ubuntu@ip-172-31-36-29:~$ ls
bashscripts  deploy.sh  deployment.yaml  get_helm.sh  react-chart  react-ingress.yaml  react-service.yaml  snap
ubuntu@ip-172-31-36-29:~$ sudo vi react-ingress.yaml
ubuntu@ip-172-31-36-29:~$ ls
bashscripts  deploy.sh  deployment.yaml  get_helm.sh  react-chart  react-ingress.yaml  react-service.yaml  snap
ubuntu@ip-172-31-36-29:~$ cd react-chart
ubuntu@ip-172-31-36-29:~/react-chart$ helm upgrade react-chart .
Release "react-chart" has been upgraded. Happy Helming!
NAME: react-chart
LAST DEPLOYED: Fri Sep  6 17:58:53 2024
NAMESPACE: default
STATUS: deployed
REVISION: 4
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=react-chart,app.kubernetes.io/instance=react-chart" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl get pods -n react-nginx-namespace
NAME                               READY   STATUS             RESTARTS   AGE
react-chart-64c79b4d84-g7sk7       1/1     Running            0          101s
react-chart-64c79b4d84-sb5hq       1/1     Running            0          101s
react-chart-7c5f97fc98-4vw5x       0/1     ImagePullBackOff   0          3m25s
react-deployment-959dfb7cb-467cw   1/1     Running            0          101s
react-deployment-959dfb7cb-nl6hv   1/1     Running            0          101s
ubuntu@ip-172-31-36-29:~/react-chart$ cd ..
ubuntu@ip-172-31-36-29:~$ ls
bashscripts  deploy.sh  deployment.yaml  get_helm.sh  react-chart  react-ingress.yaml  react-service.yaml  snap
ubuntu@ip-172-31-36-29:~$ sudo vi react-ingress.yaml
ubuntu@ip-172-31-36-29:~$ cd react-chart
ubuntu@ip-172-31-36-29:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ helm upgrade react-chart .
Release "react-chart" has been upgraded. Happy Helming!
NAME: react-chart
LAST DEPLOYED: Fri Sep  6 18:00:52 2024
NAMESPACE: default
STATUS: deployed
REVISION: 5
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=react-chart,app.kubernetes.io/instance=react-chart" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl get pods -n react-nginx-namespace
NAME                               READY   STATUS             RESTARTS   AGE
react-chart-64c79b4d84-g7sk7       1/1     Running            0          3m39s
react-chart-64c79b4d84-sb5hq       1/1     Running            0          3m39s
react-chart-7c5f97fc98-4vw5x       0/1     ImagePullBackOff   0          5m23s
react-deployment-959dfb7cb-467cw   1/1     Running            0          3m39s
react-deployment-959dfb7cb-nl6hv   1/1     Running            0          3m39s
ubuntu@ip-172-31-36-29:~/react-chart$ helm history react-chart
REVISION	UPDATED                 	STATUS    	CHART            	APP VERSION	DESCRIPTION     
1       	Fri Sep  6 17:47:10 2024	superseded	react-chart-0.1.0	1.16.0     	Install complete
2       	Fri Sep  6 17:48:50 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete
3       	Fri Sep  6 17:55:39 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete
4       	Fri Sep  6 17:58:53 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete
5       	Fri Sep  6 18:00:52 2024	deployed  	react-chart-0.1.0	1.16.0     	Upgrade complete
ubuntu@ip-172-31-36-29:~/react-chart$ cd ..
ubuntu@ip-172-31-36-29:~$ ls
bashscripts  deploy.sh  deployment.yaml  get_helm.sh  react-chart  react-ingress.yaml  react-service.yaml  snap
ubuntu@ip-172-31-36-29:~$ sudo vi react-ingress.yaml
ubuntu@ip-172-31-36-29:~$ cd bashcripts
-bash: cd: bashcripts: No such file or directory
ubuntu@ip-172-31-36-29:~$ ls
bashscripts  deploy.sh  deployment.yaml  get_helm.sh  react-chart  react-ingress.yaml  react-service.yaml  snap
ubuntu@ip-172-31-36-29:~$ cd bashscripts
ubuntu@ip-172-31-36-29:~/bashscripts$ ls
react-nginx_bashscripts
ubuntu@ip-172-31-36-29:~/bashscripts$ cd react-nginx_bashscripts
ubuntu@ip-172-31-36-29:~/bashscripts/react-nginx_bashscripts$ ls
build.sh  deploy.sh
ubuntu@ip-172-31-36-29:~/bashscripts/react-nginx_bashscripts$ cd deploy.sh
-bash: cd: deploy.sh: Not a directory
ubuntu@ip-172-31-36-29:~/bashscripts/react-nginx_bashscripts$ sudo vi deploy.sh
ubuntu@ip-172-31-36-29:~/bashscripts/react-nginx_bashscripts$ sudo vi build.sh
ubuntu@ip-172-31-36-29:~/bashscripts/react-nginx_bashscripts$ sudo vi build.sh
ubuntu@ip-172-31-36-29:~/bashscripts/react-nginx_bashscripts$ sudo vi build.sh
ubuntu@ip-172-31-36-29:~/bashscripts/react-nginx_bashscripts$ cd ..
ubuntu@ip-172-31-36-29:~/bashscripts$ cd ..
ubuntu@ip-172-31-36-29:~$ ls
bashscripts  deploy.sh  deployment.yaml  get_helm.sh  react-chart  react-ingress.yaml  react-service.yaml  snap
ubuntu@ip-172-31-36-29:~$ cd react-chart
ubuntu@ip-172-31-36-29:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ helm upgrade react-chart .
Error: UPGRADE FAILED: cannot patch "react-chart" with kind Service: Service "react-chart" is invalid: spec.ports[0].port: Invalid value: -1524072448: must be between 1 and 65535, inclusive && cannot patch "react-chart" with kind Deployment: Deployment.apps "react-chart" is invalid: spec.template.spec.containers[0].ports[0].containerPort: Invalid value: -1524072448: must be between 1 and 65535, inclusive
ubuntu@ip-172-31-36-29:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-36-29:~/react-chart$ helm upgrade react-chart .
Release "react-chart" has been upgraded. Happy Helming!
NAME: react-chart
LAST DEPLOYED: Fri Sep  6 18:07:42 2024
NAMESPACE: default
STATUS: deployed
REVISION: 7
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=react-chart,app.kubernetes.io/instance=react-chart" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
ubuntu@ip-172-31-36-29:~/react-chart$ helm history react-chart
REVISION	UPDATED                 	STATUS    	CHART            	APP VERSION	DESCRIPTION                                                                                                                                                                                                                                                                                                                                                                                                                   
1       	Fri Sep  6 17:47:10 2024	superseded	react-chart-0.1.0	1.16.0     	Install complete                                                                                                                                                                                                                                                                                                                                                                                                              
2       	Fri Sep  6 17:48:50 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
3       	Fri Sep  6 17:55:39 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
4       	Fri Sep  6 17:58:53 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
5       	Fri Sep  6 18:00:52 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
6       	Fri Sep  6 18:06:56 2024	failed    	react-chart-0.1.0	1.16.0     	Upgrade "react-chart" failed: cannot patch "react-chart" with kind Service: Service "react-chart" is invalid: spec.ports[0].port: Invalid value: -1524072448: must be between 1 and 65535, inclusive && cannot patch "react-chart" with kind Deployment: Deployment.apps "react-chart" is invalid: spec.template.spec.containers[0].ports[0].containerPort: Invalid value: -1524072448: must be between 1 and 65535, inclusive
7       	Fri Sep  6 18:07:42 2024	deployed  	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl get pods -n react-nginx-namespace
NAME                               READY   STATUS             RESTARTS   AGE
react-chart-5dd5c8cbb5-t2vq7       0/1     ImagePullBackOff   0          50s
react-chart-64c79b4d84-g7sk7       1/1     Running            0          11m
react-chart-64c79b4d84-sb5hq       1/1     Running            0          11m
react-deployment-959dfb7cb-467cw   1/1     Running            0          11m
react-deployment-959dfb7cb-nl6hv   1/1     Running            0          11m
ubuntu@ip-172-31-36-29:~/react-chart$ helm rollback react-chart 2 .
Rollback was a success! Happy Helming!
ubuntu@ip-172-31-36-29:~/react-chart$ microk8s kubectl get pods -n react-nginx-namespace
NAME                               READY   STATUS    RESTARTS   AGE
react-chart-64c79b4d84-g7sk7       1/1     Running   0          11m
react-chart-64c79b4d84-sb5hq       1/1     Running   0          11m
react-deployment-959dfb7cb-467cw   1/1     Running   0          11m
react-deployment-959dfb7cb-nl6hv   1/1     Running   0          11m
ubuntu@ip-172-31-36-29:~/react-chart$ helm history react-chart
REVISION	UPDATED                 	STATUS    	CHART            	APP VERSION	DESCRIPTION                                                                                                                                                                                                                                                                                                                                                                                                                   
1       	Fri Sep  6 17:47:10 2024	superseded	react-chart-0.1.0	1.16.0     	Install complete                                                                                                                                                                                                                                                                                                                                                                                                              
2       	Fri Sep  6 17:48:50 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
3       	Fri Sep  6 17:55:39 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
4       	Fri Sep  6 17:58:53 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
5       	Fri Sep  6 18:00:52 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
6       	Fri Sep  6 18:06:56 2024	failed    	react-chart-0.1.0	1.16.0     	Upgrade "react-chart" failed: cannot patch "react-chart" with kind Service: Service "react-chart" is invalid: spec.ports[0].port: Invalid value: -1524072448: must be between 1 and 65535, inclusive && cannot patch "react-chart" with kind Deployment: Deployment.apps "react-chart" is invalid: spec.template.spec.containers[0].ports[0].containerPort: Invalid value: -1524072448: must be between 1 and 65535, inclusive
7       	Fri Sep  6 18:07:42 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete                                                                                                                                                                                                                                                                                                                                                                                                              
8       	Fri Sep  6 18:09:17 2024	deployed  	react-chart-0.1.0	1.16.0     	Rollback to 2                                                                                                                                                                                                                                                                                                                                                                                                                 
ubuntu@ip-172-31-36-29:~/react-chart$ 

=================================================


ubuntu@ip-172-31-37-74:~$ sudo snap install microk8s --classic
microk8s (1.30/stable) v1.30.4 from Canonical✓ installed
ubuntu@ip-172-31-37-74:~$ microk8s status --wait-ready
Insufficient permissions to access MicroK8s.
You can either try again with sudo or add the user ubuntu to the 'microk8s' group:

    sudo usermod -a -G microk8s ubuntu
    sudo chown -R ubuntu ~/.kube

After this, reload the user groups either via a reboot or by running 'newgrp microk8s'.
ubuntu@ip-172-31-37-74:~$ sudo usermod -a -G microk8s ubuntu
    sudo chown -R ubuntu ~/.kube
chown: cannot access '/home/ubuntu/.kube': No such file or directory
ubuntu@ip-172-31-37-74:~$ mkdir ~/.kube
sudo microk8s kubectl config view --raw > ~/.kube/config
ubuntu@ip-172-31-37-74:~$ sudo su - root
root@ip-172-31-37-74:~# sudo su - ubuntu
ubuntu@ip-172-31-37-74:~$ microk8s kubectl get all --all-namespaces
NAMESPACE     NAME                                          READY   STATUS    RESTARTS   AGE
kube-system   pod/calico-kube-controllers-796fb75cc-zlmxc   1/1     Running   0          94s
kube-system   pod/calico-node-7dr4r                         1/1     Running   0          95s
kube-system   pod/coredns-5986966c54-jk5mf                  1/1     Running   0          94s

NAMESPACE     NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                  AGE
default       service/kubernetes   ClusterIP   10.152.183.1    <none>        443/TCP                  102s
kube-system   service/kube-dns     ClusterIP   10.152.183.10   <none>        53/UDP,53/TCP,9153/TCP   98s

NAMESPACE     NAME                         DESIRED   CURRENT   READY   UP-TO-DATE   AVAILABLE   NODE SELECTOR            AGE
kube-system   daemonset.apps/calico-node   1         1         1       1            1           kubernetes.io/os=linux   96s

NAMESPACE     NAME                                      READY   UP-TO-DATE   AVAILABLE   AGE
kube-system   deployment.apps/calico-kube-controllers   1/1     1            1           96s
kube-system   deployment.apps/coredns                   1/1     1            1           98s

NAMESPACE     NAME                                                DESIRED   CURRENT   READY   AGE
kube-system   replicaset.apps/calico-kube-controllers-796fb75cc   1         1         1       94s
kube-system   replicaset.apps/coredns-5986966c54                  1         1         1       94s
ubuntu@ip-172-31-37-74:~$ alias kubectl="microk8s kubectl"
ubuntu@ip-172-31-37-74:~$ kubectl create ns react-nginx-namespace
namespace/react-nginx-namespace created
ubuntu@ip-172-31-37-74:~$ curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3
chmod 700 get_helm.sh
./get_helm.sh
Downloading https://get.helm.sh/helm-v3.15.4-linux-amd64.tar.gz
Verifying checksum... Done.
Preparing to install helm into /usr/local/bin
helm installed into /usr/local/bin/helm
ubuntu@ip-172-31-37-74:~$ ls
get_helm.sh  snap
ubuntu@ip-172-31-37-74:~$ helm version
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/ubuntu/.kube/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /home/ubuntu/.kube/config
version.BuildInfo{Version:"v3.15.4", GitCommit:"fa9efb07d9d8debbb4306d72af76a383895aa8c4", GitTreeState:"clean", GoVersion:"go1.22.6"}
ubuntu@ip-172-31-37-74:~$ helm create react-chart
WARNING: Kubernetes configuration file is group-readable. This is insecure. Location: /home/ubuntu/.kube/config
WARNING: Kubernetes configuration file is world-readable. This is insecure. Location: /home/ubuntu/.kube/config
Creating react-chart
ubuntu@ip-172-31-37-74:~$ ls
get_helm.sh  react-chart  snap
ubuntu@ip-172-31-37-74:~$ cd react-chart
ubuntu@ip-172-31-37-74:~/react-chart$ ls
Chart.yaml  charts  templates  values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ echo "# helm" >> README.md
ubuntu@ip-172-31-37-74:~/react-chart$ git init
hint: Using 'master' as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint: 
hint: 	git config --global init.defaultBranch <name>
hint: 
hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
hint: 'development'. The just-created branch can be renamed via this command:
hint: 
hint: 	git branch -m <name>
Initialized empty Git repository in /home/ubuntu/react-chart/.git/
ubuntu@ip-172-31-37-74:~/react-chart$ git add .
ubuntu@ip-172-31-37-74:~/react-chart$ git commit -m "first commit"
[master (root-commit) f4409eb] first commit
 Committer: Ubuntu <ubuntu@ip-172-31-37-74.ec2.internal>
Your name and email address were configured automatically based
on your username and hostname. Please check that they are accurate.
You can suppress this message by setting them explicitly. Run the
following command and follow the instructions in your editor to edit
your configuration file:

    git config --global --edit

After doing this, you may fix the identity used for this commit with:

    git commit --amend --reset-author

 12 files changed, 443 insertions(+)
 create mode 100644 .helmignore
 create mode 100644 Chart.yaml
 create mode 100644 README.md
 create mode 100644 templates/NOTES.txt
 create mode 100644 templates/_helpers.tpl
 create mode 100644 templates/deployment.yaml
 create mode 100644 templates/hpa.yaml
 create mode 100644 templates/ingress.yaml
 create mode 100644 templates/service.yaml
 create mode 100644 templates/serviceaccount.yaml
 create mode 100644 templates/tests/test-connection.yaml
 create mode 100644 values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ git branch -M main
ubuntu@ip-172-31-37-74:~/react-chart$ git remote add origin https://github.com/akhilgit19/helm.git
ubuntu@ip-172-31-37-74:~/react-chart$ git push -u origin main
Username for 'https://github.com': akhilgit19
Password for 'https://akhilgit19@github.com': 
Enumerating objects: 16, done.
Counting objects: 100% (16/16), done.
Delta compression using up to 2 threads
Compressing objects: 100% (14/14), done.
Writing objects: 100% (16/16), 5.70 KiB | 1.90 MiB/s, done.
Total 16 (delta 1), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (1/1), done.
To https://github.com/akhilgit19/helm.git
 * [new branch]      main -> main
branch 'main' set up to track 'origin/main'.
ubuntu@ip-172-31-37-74:~/react-chart$ 



akhilpagadapoola@Akhils-MacBook-Air ~ % cd Documents
akhilpagadapoola@Akhils-MacBook-Air Documents % ls
Aws_EC2_Instance                Hibernate error doc.txt         Pay Slips                       itadmin_credentials.numbers
Cobol                           Hibernate new error doc.txt     React_nginx_keypair             token.txt
Devops notes                    Jenkins_keypair                 Web Development Projects        vmwarefusion
Docker_react_nginx_aws_keypair  Keys                            coorg.txt
HelloWorld.class                Kubernetes_keypair              git.txt
HelloWorld.java                 Mainframe                       ias.txt
akhilpagadapoola@Akhils-MacBook-Air Documents % git clone https://github.com/akhilgit19/helm.git
Cloning into 'helm'...
remote: Enumerating objects: 16, done.
remote: Counting objects: 100% (16/16), done.
remote: Compressing objects: 100% (13/13), done.
remote: Total 16 (delta 1), reused 16 (delta 1), pack-reused 0 (from 0)
Receiving objects: 100% (16/16), 5.70 KiB | 2.85 MiB/s, done.
Resolving deltas: 100% (1/1), done.
akhilpagadapoola@Akhils-MacBook-Air Documents % ls         
Aws_EC2_Instance                Hibernate error doc.txt         Pay Slips                       ias.txt
Cobol                           Hibernate new error doc.txt     React_nginx_keypair             itadmin_credentials.numbers
Devops notes                    Jenkins_keypair                 Web Development Projects        token.txt
Docker_react_nginx_aws_keypair  Keys                            coorg.txt                       vmwarefusion
HelloWorld.class                Kubernetes_keypair              git.txt
HelloWorld.java                 Mainframe                       helm
akhilpagadapoola@Akhils-MacBook-Air Documents % 




akhilpagadapoola@Akhils-MacBook-Air helm % git branch -a
* main
  remotes/origin/HEAD -> origin/main
  remotes/origin/main
akhilpagadapoola@Akhils-MacBook-Air helm % git checkout -b feature/kan-2
Switched to a new branch 'feature/kan-2'
akhilpagadapoola@Akhils-MacBook-Air helm % git branch -a                
* feature/kan-2
  main
  remotes/origin/HEAD -> origin/main
  remotes/origin/main
akhilpagadapoola@Akhils-MacBook-Air helm % git add .
akhilpagadapoola@Akhils-MacBook-Air helm % git commit -m "helm" 
[feature/kan-2 bb1b69e] helm
 4 files changed, 12 insertions(+), 8 deletions(-)
akhilpagadapoola@Akhils-MacBook-Air helm % git push
fatal: The current branch feature/kan-2 has no upstream branch.
To push the current branch and set the remote as upstream, use

    git push --set-upstream origin feature/kan-2

To have this happen automatically for branches without a tracking
upstream, see 'push.autoSetupRemote' in 'git help config'.

akhilpagadapoola@Akhils-MacBook-Air helm % git push --set-upstream origin feature/kan-2
Enumerating objects: 13, done.
Counting objects: 100% (13/13), done.
Delta compression using up to 8 threads
Compressing objects: 100% (7/7), done.
Writing objects: 100% (7/7), 775 bytes | 775.00 KiB/s, done.
Total 7 (delta 6), reused 0 (delta 0), pack-reused 0 (from 0)
remote: Resolving deltas: 100% (6/6), completed with 6 local objects.
remote: 
remote: Create a pull request for 'feature/kan-2' on GitHub by visiting:
remote:      https://github.com/akhilgit19/helm/pull/new/feature/kan-2
remote: 
To https://github.com/akhilgit19/helm.git
 * [new branch]      feature/kan-2 -> feature/kan-2
branch 'feature/kan-2' set up to track 'origin/feature/kan-2'.
akhilpagadapoola@Akhils-MacBook-Air helm % 

ubuntu@ip-172-31-37-74:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ git pull
remote: Enumerating objects: 14, done.
remote: Counting objects: 100% (14/14), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 8 (delta 6), reused 7 (delta 6), pack-reused 0 (from 0)
Unpacking objects: 100% (8/8), 1.60 KiB | 409.00 KiB/s, done.
From https://github.com/akhilgit19/helm
   f4409eb..cee38f9  main          -> origin/main
 * [new branch]      feature/kan-2 -> origin/feature/kan-2
Updating f4409eb..cee38f9
Fast-forward
 templates/deployment.yaml |  1 +
 templates/ingress.yaml    |  1 +
 templates/service.yaml    |  1 +
 values.yaml               | 17 +++++++++--------
 4 files changed, 12 insertions(+), 8 deletions(-)
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl config view --raw > ~/.kube/config
ubuntu@ip-172-31-37-74:~/react-chart$ chmod 600 ~/.kube/config
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl config view
apiVersion: v1
clusters:
- cluster:
    certificate-authority-data: DATA+OMITTED
    server: https://127.0.0.1:16443
  name: microk8s-cluster
contexts:
- context:
    cluster: microk8s-cluster
    user: admin
  name: microk8s
current-context: microk8s
kind: Config
preferences: {}
users:
- name: admin
  user:
    client-certificate-data: DATA+OMITTED
    client-key-data: DATA+OMITTED
ubuntu@ip-172-31-37-74:~/react-chart$ helm install react-chart-helm . --dry-run
NAME: react-chart-helm
LAST DEPLOYED: Fri Sep  6 01:54:38 2024
NAMESPACE: default
STATUS: pending-install
REVISION: 1
HOOKS:
---
# Source: react-chart/templates/tests/test-connection.yaml
apiVersion: v1
kind: Pod
metadata:
  name: "react-chart-helm-test-connection"
  labels:
    helm.sh/chart: react-chart-0.1.0
    app.kubernetes.io/name: react-chart
    app.kubernetes.io/instance: react-chart-helm
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: wget
      image: busybox
      command: ['wget']
      args: ['react-chart-helm:80']
  restartPolicy: Never
MANIFEST:
---
# Source: react-chart/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: react-chart-helm
  namespace: react-nginx-namespace
  labels:
    helm.sh/chart: react-chart-0.1.0
    app.kubernetes.io/name: react-chart
    app.kubernetes.io/instance: react-chart-helm
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/name: react-chart
    app.kubernetes.io/instance: react-chart-helm
---
# Source: react-chart/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: react-chart-helm
  namespace: react-nginx-namespace
  labels:
    helm.sh/chart: react-chart-0.1.0
    app.kubernetes.io/name: react-chart
    app.kubernetes.io/instance: react-chart-helm
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  replicas: 2
  selector:
    matchLabels:
      app.kubernetes.io/name: react-chart
      app.kubernetes.io/instance: react-chart-helm
  template:
    metadata:
      labels:
        helm.sh/chart: react-chart-0.1.0
        app.kubernetes.io/name: react-chart
        app.kubernetes.io/instance: react-chart-helm
        app.kubernetes.io/version: "1.16.0"
        app.kubernetes.io/managed-by: Helm
    spec:
      serviceAccountName: default
      securityContext:
        {}
      containers:
        - name: react-chart
          securityContext:
            {}
          image: "akhilpagadapoola/react-nginx:latest"
          imagePullPolicy: IfNotPresent
          ports:
            - name: http
              containerPort: 80
              protocol: TCP
          livenessProbe:
            httpGet:
              path: /
              port: http
          readinessProbe:
            httpGet:
              path: /
              port: http
          resources:
            {}
---
# Source: react-chart/templates/ingress.yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: react-chart-helm
  namespace: react-nginx-namespace
  labels:
    helm.sh/chart: react-chart-0.1.0
    app.kubernetes.io/name: react-chart
    app.kubernetes.io/instance: react-chart-helm
    app.kubernetes.io/version: "1.16.0"
    app.kubernetes.io/managed-by: Helm
spec:
  rules:
    - host: "hkhnet.xyz"
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: react-chart-helm
                port:
                  number: 80

NOTES:
1. Get the application URL by running these commands:
  http://hkhnet.xyz/
ubuntu@ip-172-31-37-74:~/react-chart$ helm install react-chart-helm .
NAME: react-chart-helm
LAST DEPLOYED: Fri Sep  6 01:55:38 2024
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
1. Get the application URL by running these commands:
  http://hkhnet.xyz/
ubuntu@ip-172-31-37-74:~/react-chart$ helm upgrade react-chart-helm .
Release "react-chart-helm" has been upgraded. Happy Helming!
NAME: react-chart-helm
LAST DEPLOYED: Fri Sep  6 01:56:14 2024
NAMESPACE: default
STATUS: deployed
REVISION: 2
NOTES:
1. Get the application URL by running these commands:
  http://hkhnet.xyz/
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl get pods -n react-nginx-namespace
NAME                                READY   STATUS    RESTARTS   AGE
react-chart-helm-5457c9c8dc-5jngg   1/1     Running   0          51s
react-chart-helm-5457c9c8dc-vhq98   1/1     Running   0          51s
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ ls
Chart.yaml  README.md  charts  templates  values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl get pods -n react-nginx-namespace
NAME                                READY   STATUS    RESTARTS   AGE
react-chart-helm-5457c9c8dc-5jngg   1/1     Running   0          7m39s
react-chart-helm-5457c9c8dc-vhq98   1/1     Running   0          7m39s
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ helm list
NAME            	NAMESPACE	REVISION	UPDATED                                	STATUS  	CHART            	APP VERSION
react-chart-helm	default  	2       	2024-09-06 01:56:14.233405273 +0000 UTC	deployed	react-chart-0.1.0	1.16.0     
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl get pods -n react-nginx-namespace
NAME                                READY   STATUS    RESTARTS   AGE
react-chart-helm-5457c9c8dc-5jngg   1/1     Running   0          15m
react-chart-helm-5457c9c8dc-vhq98   1/1     Running   0          15m
ubuntu@ip-172-31-37-74:~/react-chart$ helm history react-chart-helm
REVISION	UPDATED                 	STATUS    	CHART            	APP VERSION	DESCRIPTION     
1       	Fri Sep  6 01:55:38 2024	superseded	react-chart-0.1.0	1.16.0     	Install complete
2       	Fri Sep  6 01:56:14 2024	deployed  	react-chart-0.1.0	1.16.0     	Upgrade complete
ubuntu@ip-172-31-37-74:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ helm upgrade react-chart-helm .
Release "react-chart-helm" has been upgraded. Happy Helming!
NAME: react-chart-helm
LAST DEPLOYED: Fri Sep  6 02:15:44 2024
NAMESPACE: default
STATUS: deployed
REVISION: 3
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=react-chart,app.kubernetes.io/instance=react-chart-helm" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
ubuntu@ip-172-31-37-74:~/react-chart$ helm history react-chart-helm
REVISION	UPDATED                 	STATUS    	CHART            	APP VERSION	DESCRIPTION     
1       	Fri Sep  6 01:55:38 2024	superseded	react-chart-0.1.0	1.16.0     	Install complete
2       	Fri Sep  6 01:56:14 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete
3       	Fri Sep  6 02:15:44 2024	deployed  	react-chart-0.1.0	1.16.0     	Upgrade complete
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl get pods -n react-nginx-namespace
NAME                                READY   STATUS    RESTARTS   AGE
react-chart-helm-5457c9c8dc-5jngg   1/1     Running   0          20m
react-chart-helm-5457c9c8dc-vhq98   1/1     Running   0          20m
ubuntu@ip-172-31-37-74:~/react-chart$ sudo vi values.yaml
ubuntu@ip-172-31-37-74:~/react-chart$ helm upgrade react-chart-helm .
Release "react-chart-helm" has been upgraded. Happy Helming!
NAME: react-chart-helm
LAST DEPLOYED: Fri Sep  6 02:16:40 2024
NAMESPACE: default
STATUS: deployed
REVISION: 4
NOTES:
1. Get the application URL by running these commands:
  export POD_NAME=$(kubectl get pods --namespace default -l "app.kubernetes.io/name=react-chart,app.kubernetes.io/instance=react-chart-helm" -o jsonpath="{.items[0].metadata.name}")
  export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath="{.spec.containers[0].ports[0].containerPort}")
  echo "Visit http://127.0.0.1:8080 to use your application"
  kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT
ubuntu@ip-172-31-37-74:~/react-chart$ helm history react-chart-helm
REVISION	UPDATED                 	STATUS    	CHART            	APP VERSION	DESCRIPTION     
1       	Fri Sep  6 01:55:38 2024	superseded	react-chart-0.1.0	1.16.0     	Install complete
2       	Fri Sep  6 01:56:14 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete
3       	Fri Sep  6 02:15:44 2024	superseded	react-chart-0.1.0	1.16.0     	Upgrade complete
4       	Fri Sep  6 02:16:40 2024	deployed  	react-chart-0.1.0	1.16.0     	Upgrade complete
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl get pods -n react-nginx-namespace
NAME                                READY   STATUS             RESTARTS   AGE
react-chart-helm-5457c9c8dc-5jngg   1/1     Running            0          21m
react-chart-helm-5457c9c8dc-vhq98   1/1     Running            0          21m
react-chart-helm-d495d88cf-m8csd    0/1     ImagePullBackOff   0          10s
ubuntu@ip-172-31-37-74:~/react-chart$ 
ubuntu@ip-172-31-37-74:~/react-chart$ helm rollback react-chart-helm 2
Rollback was a success! Happy Helming!
ubuntu@ip-172-31-37-74:~/react-chart$ kubectl get pods -n react-nginx-namespace
NAME                                READY   STATUS    RESTARTS   AGE
react-chart-helm-5457c9c8dc-5jngg   1/1     Running   0          24m
react-chart-helm-5457c9c8dc-vhq98   1/1     Running   0          24m
ubuntu@ip-172-31-37-74:~/react-chart$ 
